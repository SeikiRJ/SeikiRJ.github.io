---
layout:           default
---

{{ content }}

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        var cateBar = document.getElementById('cateBar');
        var categoryItems = Array.prototype.slice.call(document.querySelectorAll('.artical-cate li'));

        if (!cateBar || !categoryItems.length) {
            return;
        }

        var activeItem = document.querySelector('.artical-cate .on') || categoryItems[0];

        function moveBar(item) {
            var span = item.querySelector('span');
            var parent = item.parentElement;
            if (!span || !parent) {
                return;
            }

            var spanRect = span.getBoundingClientRect();
            var parentRect = parent.getBoundingClientRect();
            var left = spanRect.left - parentRect.left;
            var width = spanRect.width + 8;

            cateBar.style.left = left + 'px';
            cateBar.style.width = width + 'px';
        }

        var resizeTimer;
        function debounceResize() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
                moveBar(activeItem);
            }, 100);
        }

        categoryItems.forEach(function (item) {
            item.addEventListener('mouseenter', function () {
                moveBar(item);
            });
            item.addEventListener('mouseleave', function () {
                moveBar(activeItem);
            });
        });

        window.addEventListener('resize', debounceResize);
        moveBar(activeItem);
    });
</script>
